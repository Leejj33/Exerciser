<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE properties SYSTEM "http://java.sun.com/dtd/properties.dtd">
<properties>
<comment>board-sql.xml</comment>

<entry key="announcementBoard">
SELECT * FROM
(
    SELECT ROWNUM RNUM, D.* FROM (
        SELECT BOARD_NO,BOARD_TITLE,
              (SELECT COUNT(*) FROM REPLY B
               WHERE B.BOARD_NO = A.BOARD_NO) AS R_C,
              (SELECT COUNT(*) FROM LIKE_BOARD C
               WHERE C.BOARD_NO = A.BOARD_NO) AS L_C,
               MEMBER_NICK,BOARD_CD
               ,TO_CHAR(CREATE_DT,'YYYY-MM-DD') AS CREATE_DT
        FROM BOARD A
        JOIN MEMBER USING(MEMBER_NO)
        WHERE BOARD_CD = 1
        ORDER BY CREATE_DT DESC
    )D
)
WHERE RNUM = 1
</entry>

<entry key="hotBoard">
SELECT * FROM
(
    SELECT ROWNUM RNUM, D.* FROM (
        SELECT BOARD_NO,BOARD_TITLE,
              (SELECT COUNT(*) FROM REPLY B
               WHERE B.BOARD_NO = A.BOARD_NO) AS R_C,
              (SELECT COUNT(*) FROM LIKE_BOARD C
               WHERE C.BOARD_NO = A.BOARD_NO) AS L_C,
               MEMBER_NICK,BOARD_CD
               ,TO_CHAR(CREATE_DT,'YYYY-MM-DD') AS CREATE_DT
        FROM BOARD A
        JOIN MEMBER USING(MEMBER_NO)
        WHERE  (SELECT COUNT(*) FROM LIKE_BOARD C
               WHERE C.BOARD_NO = A.BOARD_NO) >= 5
        AND BOARD_CD IN (2,3,4)
        ORDER BY CREATE_DT DESC
    )D
)
WHERE RNUM BETWEEN 1 AND 7
</entry>

<entry key="recencyBoard">
SELECT * FROM
(
    SELECT ROWNUM RNUM, D.* FROM (
        SELECT BOARD_NO,BOARD_TITLE,
              (SELECT COUNT(*) FROM REPLY B
               WHERE B.BOARD_NO = A.BOARD_NO) AS R_C,
              (SELECT COUNT(*) FROM LIKE_BOARD C
               WHERE C.BOARD_NO = A.BOARD_NO) AS L_C,
               MEMBER_NICK,BOARD_CD
               ,TO_CHAR(CREATE_DT,'YYYY-MM-DD') AS CREATE_DT
        FROM BOARD A
        JOIN MEMBER USING(MEMBER_NO)
        ORDER BY CREATE_DT DESC
    )D
)
WHERE RNUM BETWEEN 1 AND 7
</entry>

<entry key="exerciseBoard">
SELECT * FROM
(
    SELECT ROWNUM RNUM, D.* FROM (
        SELECT BOARD_NO,BOARD_TITLE,
              (SELECT COUNT(*) FROM REPLY B
               WHERE B.BOARD_NO = A.BOARD_NO) AS R_C,
              (SELECT COUNT(*) FROM LIKE_BOARD C
               WHERE C.BOARD_NO = A.BOARD_NO) AS L_C,
               MEMBER_NICK,BOARD_CD
               ,TO_CHAR(CREATE_DT,'YYYY-MM-DD') AS CREATE_DT
        FROM BOARD A
        JOIN MEMBER USING(MEMBER_NO)
        WHERE BOARD_CD = 2
        ORDER BY CREATE_DT DESC
    )D
)
WHERE RNUM BETWEEN 1 AND 7
</entry>

<entry key="freeBoard">
SELECT * FROM
(
    SELECT ROWNUM RNUM, D.* FROM (
        SELECT BOARD_NO,BOARD_TITLE,
              (SELECT COUNT(*) FROM REPLY B
               WHERE B.BOARD_NO = A.BOARD_NO) AS R_C,
              (SELECT COUNT(*) FROM LIKE_BOARD C
               WHERE C.BOARD_NO = A.BOARD_NO) AS L_C,
               MEMBER_NICK,BOARD_CD
               ,TO_CHAR(CREATE_DT,'YYYY-MM-DD') AS CREATE_DT
        FROM BOARD A
        JOIN MEMBER USING(MEMBER_NO)
        WHERE BOARD_CD = 3
        ORDER BY CREATE_DT DESC
    )D
)
WHERE RNUM BETWEEN 1 AND 7
</entry>

<entry key="metBoard">
SELECT * FROM
(
    SELECT ROWNUM RNUM, D.* FROM (
        SELECT BOARD_NO,BOARD_TITLE,
              (SELECT COUNT(*) FROM REPLY B
               WHERE B.BOARD_NO = A.BOARD_NO) AS R_C,
              (SELECT COUNT(*) FROM LIKE_BOARD C
               WHERE C.BOARD_NO = A.BOARD_NO) AS L_C,
               MEMBER_NICK,BOARD_CD
               ,TO_CHAR(CREATE_DT,'YYYY-MM-DD') AS CREATE_DT
        FROM BOARD A
        JOIN MEMBER USING(MEMBER_NO)
        WHERE BOARD_CD = 4
        ORDER BY CREATE_DT DESC
    )D
)
WHERE RNUM BETWEEN 1 AND 5
</entry>










<!-- 게시글 조회 -->
<entry key="boardDetail">
SELECT BOARD_NO,BOARD_TITLE,BOARD_CONTENT,READ_COUNT,
	   MEMBER_NICK,
	   TO_CHAR(CREATE_DT,'YYYY-MM-DD hh:mm:ss') CREATE_DT,
	   TO_CHAR(UPDATE_DT,'YYYY-MM-DD hh:mm:ss') UPDATE_DT,
	   BOARD_NM
FROM BOARD
JOIN MEMBER USING(MEMBER_NO)
JOIN BOARD_TYPE USING(BOARD_CD)
WHERE BOARD_NO = ?
AND BOARD_FL = 'N'
</entry>


<!-- 내 글 목록 조회 -->
<entry key="">
SELECT BOARD_NO, BOARD_NM, BOARD_TITLE, CREATE_DT
FROM BOARD
JOIN BOARD_TYPE USING(BOARD_CD)
JOIN MEMBER USING(MEMBER_NO)
WHERE BOARD_FL = 'N'
AND MEMBER_NO = ?
</entry>


</properties>
